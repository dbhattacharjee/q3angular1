<img ng-if="vm.dataLoading" src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==" />
<div style="text-align:right;padding-right: 0px;padding-bottom: 5px;">
    <button type="button" class="btn btn-danger" ng-click="refreshQueue()">Refresh Email Queue</button>
</div>
<form class="form-inline">
    <div class="form-group">
        <label >Search</label>
        <input type="text" ng-model="search" class="form-control" placeholder="Search">
    </div>
</form>
<br/>
<table class="table table-striped table-bordered table-hover" id="dataTables-example">
    <thead>
        <tr>
            <th ng-click="sort('subject')">Subject
                <span class="glyphicon sort-icon" ng-show="sortKey=='subject'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
            </th>
            <th ng-click="sort('from')">From
                <span class="glyphicon sort-icon" ng-show="sortKey=='from'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
            </th>
            <th ng-click="sort('to')">To
                <span class="glyphicon sort-icon" ng-show="sortKey=='to'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
            </th>
            <th ng-click="sort('cc')">CC
                <span class="glyphicon sort-icon" ng-show="sortKey=='cc'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
            </th>
            <th ng-click="sort('dated')">CC
                <span class="glyphicon sort-icon" ng-show="sortKey=='dated'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
            </th>
        </tr>
    </thead>
    <tbody>
<!--        <tr ng-repeat="mail in mails">-->
    <tr dir-paginate="mail in mails | orderBy:sortKey:reverse |filter:search | itemsPerPage: ITEMS_PER_PAGE">
            <td><a href="" ng-click="readMail(mail['id'])">{{ mail["subject"] | limitTo : 50 : 0}}</a></td>
            <td ng-bind-html="mail.from | ashtml"></td>
            <td ng-bind-html="mail.to | ashtml"></td>
            <td ng-bind-html="mail.cc | ashtml"></td>
            <td style="width:150px;">{{ mail["dated"] | date:'MMM dd, yyyy HH:mm' }}</td>
        </tr>
    </tbody>
</table>
<dir-pagination-controls></dir-pagination-controls>

<script type="text/ng-template" id="firstDialogId">
    <div class="ngdialog-message">
    <strong>Subject : </strong>{{email_subject}}<br/>
    <strong>From : </strong><span ng-bind-html="email_from"></span><br/>
    <strong>To : </strong><span ng-bind-html="email_to"></span><br/>
    <strong>CC : </strong><span ng-bind-html="email_cc"></span><br/>
    <strong>Attachment(s) : </strong><span ng-bind-html="email_attachments"></span><br/>
    
    <div ng-bind-html="email_body" id="mailBody">
    </div>
    </div>
    <div class="ngdialog-buttons">
<!--    <button type="button" class="ngdialog-button ngdialog-button-secondary"
    ng-click="closeThisDialog()"e>Close</button>-->
    </div>
</script>

<style>
    .ngdialog.ngdialog-theme-default .ngdialog-content {width:90% !important;}
    #mailBody{height:250px; overflow: auto;border: 1px solid black; border-radius: 3px;padding: 2px;}
    .pagination{margin: 0px;}
</style>